<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Word Guess Game</title>
</head>

<body>
    <p>Type letters to try to guess the Sci-Fi movie below.</p>
    <p>Wins:
        <span id="wins">0</span>
    </p>
    <p>Current Word:
        <span id="randomWord"></span>
    </p>
    <p>Number of guesses remaining:
        <span id="guessCounter">12</span>
    </p>
    <p>Letters already guessed:
        <span id="guesses"></span>
    </p>

    <script>
        var potentialWords = ["Inception", "Primer", "Surrogates", "Aliens", "Serenity", "Signs", "Starman", "Spaceballs", "Gravity", "Arrival", "Akira", "Coma", "Innerspace", "Elysium", "Looper", "Avatar", "Interstellar", "Prometheus", "Skyline", "Cloverfield", "Knowing", "Zathura", "Existenz", "Predator", "Frequency"];
        var wins = 0;
        var Counter = 12;
        var guessTries = [];
        var dash = "-";



        window.onload = function () {
            var movie = potentialWords[Math.floor(Math.random() * potentialWords.length)];
            movie = movie.toUpperCase();
            var movieLetters = movie.split("");
            console.log(movieLetters);

            function dashWord() {
                var dash = "-";
                var dashes = dash.repeat(movieLetters.length);
                //var removedLetters = movieLetters.splice(0, movieLetters.length, dashes);
                randomWord.textContent = dashes;
                return dashes.split("");
            };
            //randomWord.textContent = movieLetters;
            movieLetters.forEach(dashWord);
            //console.log("Removed: " + removedLetters);
            dashes = dashWord();



            document.onkeyup = function (event) {


                //userGuess equals the key pressed and appears in HTML
                var userGuess = event.key.toUpperCase();


                //This function adds each key pressed to the guessTries array
                function guessList() {
                    guessTries.push(userGuess);
                    var printThis = "";
                    for (var i = 0; i < guessTries.length; i++) {
                        printThis += guessTries[i] + ", ";
                    }
                    return printThis;
                };

                //inserts the result of the above function into the HTML for list of guesses made
                document.querySelector("#guesses").innerHTML = guessList();




                function replaceLetters(movieLetters) {
                    for (var i = 0; i < movieLetters.length; i++) {
                        //var index = movieLetters.indexOf(userGuess);
                        if (movieLetters[i] === userGuess) {
                            dashes.splice(i, 1, userGuess);
                            console.log(dashes);
                            randomWord.textContent = dashes.join("");
                            
                        }
                    };
                };

                replaceLetters(movieLetters);
                if(Counter > 0){
                    Counter--;
                guessCounter.textContent = Counter;
                } else if (Counter === 0){
                    location.reload();
                };
                
                if (movieLetters === dashes) {
                    wins++;
                    document.querySelector("#wins").innerHTML = wins;
                    Counter = 12;
                    guessCounter.textContent = Counter;
                };




            };
        };


    </script>

</body>

</html>